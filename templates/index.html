<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI-Powered Task Management Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 font-sans">
    <div class="container mx-auto px-4 py-8 max-w-4xl">
        <h1 class="text-3xl font-bold text-center text-gray-800 mb-8">AI-Powered Task Management Dashboard</h1>

        <!-- Task Prediction Form -->
        <div class="bg-white rounded-lg shadow-lg mb-6">
            <div class="bg-blue-600 text-white font-semibold text-lg px-6 py-3 rounded-t-lg">Predict Task Details</div>
            <div class="p-6">
                <form id="predict-form" class="space-y-4">
                    <div>
                        <label for="task_description" class="block text-sm font-medium text-gray-700">Task Description</label>
                        <textarea id="task_description" name="task_description" rows="4" class="mt-1 w-full border border-gray-300 rounded-md p-2 focus:ring-blue-500 focus:border-blue-500" required></textarea>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <div>
                            <label for="user_workload" class="block text-sm font-medium text-gray-700">User Workload (0-20)</label>
                            <input type="number" id="user_workload" name="user_workload" value="5" min="0" max="20" step="1" class="mt-1 w-full border border-gray-300 rounded-md p-2 focus:ring-blue-500 focus:border-blue-500" required>
                        </div>
                        <div>
                            <label for="user_behavior_score" class="block text-sm font-medium text-gray-700">User Behavior Score (0-1)</label>
                            <input type="number" id="user_behavior_score" name="user_behavior_score" value="0.8" min="0" max="1" step="0.1" class="mt-1 w-full border border-gray-300 rounded-md p-2 focus:ring-blue-500 focus:border-blue-500" required>
                        </div>
                        <div>
                            <label for="days_until_due" class="block text-sm font-medium text-gray-700">Days Until Due</label>
                            <input type="number" id="days_until_due" name="days_until_due" value="7" min="0" step="1" class="mt-1 w-full border border-gray-300 rounded-md p-2 focus:ring-blue-500 focus:border-blue-500" required>
                        </div>
                    </div>
                    <div>
                        <label for="user_role" class="block text-sm font-medium text-gray-700">User Role</label>
                        <select id="user_role" name="user_role" class="mt-1 w-full border border-gray-300 rounded-md p-2 focus:ring-blue-500 focus:border-blue-500" required>
                            {% for role in user_roles %}
                            <option value="{{ role }}">{{ role }}</option>
                            {% endfor %}
                        </select>
                    </div>
                    <button type="submit" class="w-full md:w-auto bg-blue-600 text-white font-semibold py-2 px-4 rounded-md hover:bg-blue-700 transition duration-200">Predict</button>
                </form>
                <div id="prediction-result" class="mt-4 min-h-[60px]"></div>
            </div>
        </div>

        <!-- Task Volume Forecast -->
        <div class="bg-white rounded-lg shadow-lg">
            <div class="bg-blue-600 text-white font-semibold text-lg px-6 py-3 rounded-t-lg">Task Volume Forecast</div>
            <div class="p-6">
                <form id="forecast-form" class="space-y-4">
                    <div>
                        <label for="forecast_period" class="block text-sm font-medium text-gray-700">Forecast Period (days, 1-90)</label>
                        <input type="number" id="forecast_period" name="forecast_period" value="30" min="1" max="90" step="1" class="mt-1 w-full border border-gray-300 rounded-md p-2 focus:ring-blue-500 focus:border-blue-500" required>
                    </div>
                    <button type="submit" class="w-full md:w-auto bg-blue-600 text-white font-semibold py-2 px-4 rounded-md hover:bg-blue-700 transition duration-200">Generate Forecast</button>
                </form>
                <div id="forecast-result" class="mt-4">
                    <canvas id="forecast-chart" class="max-h-[400px]"></canvas>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.9.1/dist/chart.min.js"></script>
    <script src="{{ url_for('static', filename='js/script.js') }}"></script>
</body>
</html>
